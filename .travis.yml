os:
- linux
services:
- docker
language: node_js
node_js:
- 8.9.4
jdk:
- oraclejdk8
sudo: false
cache:
  directories:
  - node
  - node_modules
  - "$HOME/.m2"
  - "$HOME/.yarn-cache"
env:
  global:
  - NODE_VERSION=8.9.4
  - SPRING_OUTPUT_ANSI_ENABLED=ALWAYS
  - SPRING_JPA_SHOW_SQL=false
before_install:
- jdk_switcher use oraclejdk8
- java -version
- sudo /etc/init.d/mysql stop
- sudo /etc/init.d/postgresql stop
- curl -o- -L https://yarnpkg.com/install.sh | bash
- export PATH=$HOME/.yarn/bin:$PATH
install:
- yarn install
script:
- chmod +x mvnw
- "./mvnw clean test"
- yarn test
- "./mvnw verify -Pprod -DskipTests"
notifications:
  webhooks:
    on_success: change
    on_failure: always
    on_start: false
deploy:
  provider: heroku
  api_key:
    secure: YpRe4p2mg1AyjP4kwwY8ZWcty6bg5d59az4ejNayBRQYPoTJraCnDejDGR4iTrlkrjuXRMXy8solzypjbsThZMXp+j7Yjd7mCtzilvoa8/bZc/SqnowA3c5Qy3Izt4bS3sccrRRcidnz3TZ/TbjYdvsnzJ5RhywZjBjCaS3uR67guYXLkN47z8RffrqlwannhoE27Vm5XBe/em12+I3KA5C1/9KoQYNpEaHQTvRUTnvtubmxHZpb835Rbhhq7rd6mgw1rCwL4ITYRb/+hzkeje5OsPnpBYBIWTqHfR4GMOFjnw2QVSfvU60SfqmEkLwf26/jGp7ICsed80CKY8lvPNktqlIhxkk7Hb+PAJT8Vvi9hEyPSsDQTdkKUyRX5wL0mbslwoLkb+6XSh8Zq1z7NViRbJeJN3qvtstYyAhNlyrCxBloz19MvqtupZ38+JdgrKg61IIwIveaUoIAFMwE3m9iLhjhRfPxIkpd6CmyqS5mpn8ygzw6vWYe9VMexgC0eu4LokFBGLfAmU3qNahvatuB8Cs/uGOIUVxoJzWorodJDjJ2nWgT0TjtIXoouwgfklgfGDJLFH6ZpWWwCE82jvqEbJPXgfnVgdEv4cM/4fOWWu0bP6+4NssKe2dBfiZ6aBaV7icF08mM+Yn2cWEvyL/UCLSUr+Duvgf7ybyxkjU=
  app: vip_adpq
  on:
    repo: adhawan-vip/vip_adpq
